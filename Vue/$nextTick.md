# $nextTick用法
## 概述
this.$nextTick -- 将回调延时到下次DOM渲染后执行。在修改数据之后会立即使用它，然后等待DOM更新。

它主要处理的问题是我们在数据变更完以后，无法立刻拿到最新的DOM节点的问题。我们可以理解成：vue在执行完渲染后会立刻调用this.$nextTick( callback )的callback函数.

## 实现原理

vue会将多次修改的变量watcher放入一个异步队列,来统一更新。同一事件循环内多次修改，会统一进行一次视图更新，这样才能节省性能。

nextTick方法会在同一事件循环中的数据变化后，DOM完成更新完成后才调用。在nextTick原理上，不一定返回一个Promise，也有可能是通过MutationObserver、setImmediate或setTimeout(()=>{}, 0)实现。

DOM操作是同步的，在本质上，DOM也只是一个对象而已，这里的同步是指在修改DOM对象时，在数据层面上，你的下一行代码就可以拿到它的修改结果，但是视觉上可不一定，因为要想看到页面上渲染出对应的元素，还需要浏览器的进一步Render操作，这个Render才是异步，不能把概念搞混淆。

宏任务，微任务，UI渲染没有错，js修改了dom之后，在js里面去获取的时候，根据的是js对dom操作的结果，UI渲染只是页面的展示，并不影响js对dom元素的获取和操作。